# VisionBoard Diary - é–‹ç™ºã‚¬ã‚¤ãƒ‰

å°†æ¥ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã¨ä¿å®ˆã®ãŸã‚ã®åŒ…æ‹¬çš„ãªé–‹ç™ºãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

## ğŸ“š ç›®æ¬¡

- [ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦](#ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦)
- [ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè©³ç´°](#ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè©³ç´°)
- [çŠ¶æ…‹ç®¡ç†](#çŠ¶æ…‹ç®¡ç†)
- [ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼](#ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼)
- [ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°æˆ¦ç•¥](#ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°æˆ¦ç•¥)
- [ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–](#ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–)
- [ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆæ™‚ã®æ³¨æ„ç‚¹](#ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆæ™‚ã®æ³¨æ„ç‚¹)

---

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦

### ãƒ¬ã‚¤ãƒ¤ãƒ¼æ§‹é€ 

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         UI Components               â”‚  â† React ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      State Management (Hooks)       â”‚  â† useState, useEffect
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    Data Persistence (Tauri Store)   â”‚  â† JSONãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚       Tauri Runtime (Rust)          â”‚  â† ãƒã‚¤ãƒ†ã‚£ãƒ–API
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ãƒ•ã‚©ãƒ«ãƒ€æ§‹æˆã®åŸå‰‡

- **components/**: å†åˆ©ç”¨å¯èƒ½ãªUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- **utils/**: ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°ã€ãƒ˜ãƒ«ãƒ‘ãƒ¼
- **services/**: ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–ã€å¤–éƒ¨APIé€£æºï¼ˆä»Šå¾Œï¼‰
- **types/**: TypeScriptå‹å®šç¾©ï¼ˆä»Šå¾Œï¼‰

---

## ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè©³ç´°

### 1. App.tsxï¼ˆãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼‰

**è²¬ä»»**:
- ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã®çŠ¶æ…‹ç®¡ç†
- ãƒ“ã‚¸ãƒ§ãƒ³ãƒœãƒ¼ãƒ‰ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆåˆ¶å¾¡
- ãƒ†ãƒ¼ãƒç®¡ç†
- ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–ã®èª¿æ•´

**ä¸»è¦ãªçŠ¶æ…‹**:
```typescript
interface AppState {
  theme: 'classic' | 'pop' | 'dark';
  items: StickyItem[];
  selected: string[];
  draggingId: string | null;
  offset: { x: number; y: number };
  isPanning: boolean;
  panStart: { x: number; y: number };
}
```

**é‡è¦ãªãƒ•ãƒƒã‚¯**:
- `useEffect` (è¡Œ38-57): ãƒ‡ãƒ¼ã‚¿ãƒ­ãƒ¼ãƒ‰ï¼ˆãƒã‚¦ãƒ³ãƒˆæ™‚ï¼‰
- `useEffect` (è¡Œ56-69): itemsè‡ªå‹•ä¿å­˜
- `useEffect` (è¡Œ72-83): themeè‡ªå‹•ä¿å­˜

**å¤‰æ›´æ™‚ã®æ³¨æ„**:
- `StickyItem`ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å¤‰æ›´ã™ã‚‹å ´åˆã€`visionboard.json`ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãŒå¿…è¦
- æ–°ã—ã„ã‚°ãƒ­ãƒ¼ãƒãƒ«çŠ¶æ…‹ã‚’è¿½åŠ ã™ã‚‹å ´åˆã€æ°¸ç¶šåŒ–ãƒ­ã‚¸ãƒƒã‚¯ã‚‚è¿½åŠ 

---

### 2. Journal.tsxï¼ˆæ—¥è¨˜ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼‰

**è²¬ä»»**:
- æ—¥ä»˜ã”ã¨ã®æ—¥è¨˜ã‚¨ãƒ³ãƒˆãƒªãƒ¼ç®¡ç†
- ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
- ãƒªãƒƒãƒãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼

**ä¸»è¦ãªçŠ¶æ…‹**:
```typescript
interface JournalState {
  date: Date;                          // ç¾åœ¨è¡¨ç¤ºä¸­ã®æ—¥ä»˜
  store: { [key: string]: string };    // æ—¥ä»˜ã‚­ãƒ¼ â†’ HTMLã‚³ãƒ³ãƒ†ãƒ³ãƒ„
}
```

**é‡è¦ãªãƒ•ãƒƒã‚¯**:
- `useEffect` (è¡Œ43-57): ã‚¸ãƒ£ãƒ¼ãƒŠãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ­ãƒ¼ãƒ‰ï¼ˆãƒã‚¦ãƒ³ãƒˆæ™‚ï¼‰
- `useEffect` (è¡Œ59-61): æ—¥ä»˜å¤‰æ›´æ™‚ã®åˆæœŸåŒ–
- `useEffect` (è¡Œ63-68): ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼å†…å®¹ã®å¾©å…ƒ
- `useEffect` (è¡Œ70-85): ã‚¸ãƒ£ãƒ¼ãƒŠãƒ«ãƒ‡ãƒ¼ã‚¿è‡ªå‹•ä¿å­˜

**å¤‰æ›´æ™‚ã®æ³¨æ„**:
- `contentEditable`ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ãŸã‚ã€XSSå¯¾ç­–ãŒå¿…è¦
- HTMLå½¢å¼ã§ä¿å­˜ã—ã¦ã„ã‚‹ãŸã‚ã€ã‚µãƒ‹ã‚¿ã‚¤ã‚ºå‡¦ç†ã®è¿½åŠ ã‚’æ¤œè¨

---

### 3. Sticky.tsxï¼ˆä»˜ç®‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼‰

**è²¬ä»»**:
- å€‹åˆ¥ä»˜ç®‹ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
- ãƒ†ã‚­ã‚¹ãƒˆç·¨é›†
- è¦–è¦šçš„ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°

**Props**:
```typescript
interface StickyProps {
  item: StickyItem;
  selected: boolean;
  onUpdate: (item: StickyItem) => void;
  onDelete: () => void;
  theme: string;
}
```

**ç‰¹å¾´**:
- `contentEditable`ã«ã‚ˆã‚‹ç›´æ¥ç·¨é›†
- ãƒ†ãƒ¼ãƒã”ã¨ã®ã‚¹ã‚¿ã‚¤ãƒ«åˆ‡ã‚Šæ›¿ãˆ
- ãƒ›ãƒãƒ¼ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆPopãƒ†ãƒ¼ãƒï¼‰

**å¤‰æ›´æ™‚ã®æ³¨æ„**:
- æ–°ã—ã„ãƒãƒªã‚¢ãƒ³ãƒˆã‚’è¿½åŠ ã™ã‚‹å ´åˆã€æ¡ä»¶åˆ†å²ãŒè¤‡é›‘åŒ–ã™ã‚‹ãŸã‚ã€ãƒãƒªã‚¢ãƒ³ãƒˆãƒãƒƒãƒ—ã®å°å…¥ã‚’æ¤œè¨
- ç”»åƒã‚µãƒãƒ¼ãƒˆè¿½åŠ æ™‚ã€`item.image`ã®è¡¨ç¤ºãƒ­ã‚¸ãƒƒã‚¯ã‚’è¿½åŠ 

---

### 4. Draggable.tsxï¼ˆãƒ‰ãƒ©ãƒƒã‚°æ©Ÿèƒ½ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼‰

**è²¬ä»»**:
- ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—æ©Ÿèƒ½ã®æä¾›
- ãƒã‚¤ãƒ³ã‚¿ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆã®å‡¦ç†

**Props**:
```typescript
interface DraggableProps {
  id: string;
  x: number;
  y: number;
  width: number;
  height: number;
  onDragStart?: () => void;
  onDrag?: (id: string, x: number, y: number) => void;
  onDragEnd?: () => void;
  children: React.ReactNode;
}
```

**ã‚¤ãƒ™ãƒ³ãƒˆãƒ•ãƒ­ãƒ¼**:
```
onPointerDown â†’ onPointerMove â†’ onPointerUp
     â†“               â†“               â†“
onDragStart  â†’   onDrag    â†’   onDragEnd
```

**å¤‰æ›´æ™‚ã®æ³¨æ„**:
- ã‚¿ãƒƒãƒãƒ‡ãƒã‚¤ã‚¹å¯¾å¿œæ™‚ã€`touch-action: none`ãŒé‡è¦
- ãƒªã‚µã‚¤ã‚ºæ©Ÿèƒ½è¿½åŠ æ™‚ã€ãƒãƒ³ãƒ‰ãƒ«æ¤œå‡ºãƒ­ã‚¸ãƒƒã‚¯ã‚’è¿½åŠ 

---

## çŠ¶æ…‹ç®¡ç†

### ç¾åœ¨ã®çŠ¶æ…‹ç®¡ç†æˆ¦ç•¥

**ãƒ­ãƒ¼ã‚«ãƒ«çŠ¶æ…‹ (useState)**:
- ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå›ºæœ‰ã®çŠ¶æ…‹
- ä¸€æ™‚çš„ãªUIçŠ¶æ…‹ï¼ˆãƒ›ãƒãƒ¼ã€ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ãªã©ï¼‰

**Props Drilling**:
- è¦ªã‹ã‚‰å­ã¸ã®ãƒ‡ãƒ¼ã‚¿ä¼é”
- ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ã«ã‚ˆã‚‹çŠ¶æ…‹æ›´æ–°

**ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ– (Tauri Store)**:
- ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³çŠ¶æ…‹ã®æ°¸ç¶šåŒ–
- JSONãƒ•ã‚¡ã‚¤ãƒ«ã¸ã®è‡ªå‹•ä¿å­˜

### å°†æ¥ã®æ‹¡å¼µï¼ˆZustandã®æ´»ç”¨ï¼‰

**æ¨å¥¨ã•ã‚Œã‚‹çŠ¶æ…‹ç®¡ç†æ§‹é€ **:

```typescript
// src/store/useStore.ts
import { create } from 'zustand';
import { persist } from 'zustand/middleware';

interface AppStore {
  // State
  items: StickyItem[];
  theme: 'classic' | 'pop' | 'dark';
  journals: { [key: string]: string };

  // Actions
  addItem: (item: StickyItem) => void;
  updateItem: (id: string, updates: Partial<StickyItem>) => void;
  deleteItem: (id: string) => void;
  setTheme: (theme: 'classic' | 'pop' | 'dark') => void;
  setJournal: (date: string, content: string) => void;
}

export const useStore = create<AppStore>()(
  persist(
    (set) => ({
      items: [],
      theme: 'classic',
      journals: {},

      addItem: (item) => set((state) => ({
        items: [...state.items, item]
      })),

      updateItem: (id, updates) => set((state) => ({
        items: state.items.map(item =>
          item.id === id ? { ...item, ...updates } : item
        )
      })),

      deleteItem: (id) => set((state) => ({
        items: state.items.filter(item => item.id !== id)
      })),

      setTheme: (theme) => set({ theme }),

      setJournal: (date, content) => set((state) => ({
        journals: { ...state.journals, [date]: content }
      })),
    }),
    {
      name: 'visionboard-storage',
    }
  )
);
```

**ä½¿ç”¨ä¾‹**:
```typescript
// App.tsx
import { useStore } from './store/useStore';

function App() {
  const items = useStore(state => state.items);
  const theme = useStore(state => state.theme);
  const addItem = useStore(state => state.addItem);
  const setTheme = useStore(state => state.setTheme);

  // ...
}
```

**ãƒ¡ãƒªãƒƒãƒˆ**:
- Props drillingã®å‰Šæ¸›
- ã‚³ãƒ¼ãƒ‰å¯èª­æ€§ã®å‘ä¸Š
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ï¼ˆã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ï¼‰
- ãƒ‡ãƒãƒƒã‚°ãƒ„ãƒ¼ãƒ«ã®åˆ©ç”¨

---

## ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

### ä»˜ç®‹ã®è¿½åŠ ãƒ•ãƒ­ãƒ¼

```
User Click "Add Sticky"
        â†“
generateId() â†’ newItem
        â†“
setItems([...items, newItem])
        â†“
useEffect (items dependency)
        â†“
store.set("items", items)
        â†“
store.save()
        â†“
visionboard.json updated
```

### æ—¥è¨˜ã®ä¿å­˜ãƒ•ãƒ­ãƒ¼

```
User types in editor
        â†“
onInput event
        â†“
setStore({ ...store, [dkey]: html })
        â†“
useEffect (store dependency)
        â†“
tauriStore.set("journals", store)
        â†“
tauriStore.save()
        â†“
journal.json updated
```

### ãƒ†ãƒ¼ãƒå¤‰æ›´ãƒ•ãƒ­ãƒ¼

```
User clicks theme button
        â†“
setTheme(newTheme)
        â†“
useEffect (theme dependency)
        â†“
store.set("theme", theme)
        â†“
store.save()
        â†“
CSS classes update (via cx utility)
        â†“
UI re-renders with new theme
```

---

## ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°æˆ¦ç•¥

### Tailwind CSSæ´»ç”¨

**è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«**: `tailwind.config.js`

```javascript
module.exports = {
  content: ["./index.html", "./src/**/*.{js,ts,jsx,tsx}"],
  theme: {
    extend: {
      // ã‚«ã‚¹ã‚¿ãƒ ã‚«ãƒ©ãƒ¼ã€ãƒ•ã‚©ãƒ³ãƒˆã€ã‚¹ãƒšãƒ¼ã‚·ãƒ³ã‚°ãªã©
    },
  },
  plugins: [
    require('@tailwindcss/typography'),  // prose ã‚¯ãƒ©ã‚¹
  ],
};
```

### ãƒ†ãƒ¼ãƒã‚·ã‚¹ãƒ†ãƒ 

**ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°**: `src/utils/helpers.ts`

```typescript
export const isDark = (theme: string) => theme === 'dark';
export const isPop = (theme: string) => theme === 'pop';
export const isClassic = (theme: string) => theme === 'classic';

export const cx = (...classes: (string | boolean | undefined)[]) =>
  classes.filter(Boolean).join(' ');
```

**ä½¿ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³**:
```typescript
className={cx(
  "base-classes",
  isPop(theme) && "pop-specific-classes",
  isDark(theme) && "dark-specific-classes",
  isClassic(theme) && "classic-specific-classes"
)}
```

### æ–°ã—ã„ãƒ†ãƒ¼ãƒè¿½åŠ æ‰‹é †

1. **ãƒ†ãƒ¼ãƒå‹ã«è¿½åŠ **:
```typescript
type Theme = 'classic' | 'pop' | 'dark' | 'newTheme';
```

2. **ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°è¿½åŠ **:
```typescript
export const isNewTheme = (theme: string) => theme === 'newTheme';
```

3. **æ¡ä»¶åˆ†å²ã«è¿½åŠ **:
```typescript
className={cx(
  "base",
  isNewTheme(theme) && "newTheme-classes"
)}
```

4. **App.tsxã®ãƒœã‚¿ãƒ³è¿½åŠ **:
```typescript
<button onClick={() => setTheme('newTheme')}>
  New Theme
</button>
```

---

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### ç¾åœ¨ã®æœ€é©åŒ–

1. **useMemo**: é«˜ã‚³ã‚¹ãƒˆãªè¨ˆç®—ã®ãƒ¡ãƒ¢åŒ–
```typescript
const dstr = useMemo(
  () => date.toLocaleDateString(/* ... */),
  [date]
);
```

2. **useRef**: DOMå‚ç…§ã®ä¿æŒ
```typescript
const editorRef = useRef<HTMLDivElement>(null);
```

3. **æ¡ä»¶ä»˜ããƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°**: ä¸è¦ãªè¦ç´ ã®éè¡¨ç¤º
```typescript
{selected.length > 0 && <DeleteButton />}
```

### å°†æ¥ã®æœ€é©åŒ–æ¡ˆ

#### 1. React.memo

**å•é¡Œ**: è¦ªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æ™‚ã«å­ã‚‚å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°

**è§£æ±ºç­–**:
```typescript
// src/components/Sticky.tsx
export const Sticky = React.memo(function Sticky({ item, selected, onUpdate, onDelete, theme }: StickyProps) {
  // ...
}, (prevProps, nextProps) => {
  // ã‚«ã‚¹ã‚¿ãƒ æ¯”è¼ƒé–¢æ•°
  return (
    prevProps.item.id === nextProps.item.id &&
    prevProps.selected === nextProps.selected &&
    prevProps.theme === nextProps.theme
  );
});
```

#### 2. ä»®æƒ³åŒ–ï¼ˆreact-windowï¼‰

**å•é¡Œ**: å¤§é‡ã®ä»˜ç®‹ï¼ˆ100+ï¼‰ã§ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ä½ä¸‹

**è§£æ±ºç­–**:
```typescript
import { FixedSizeGrid } from 'react-window';

<FixedSizeGrid
  columnCount={Math.floor(width / 220)}
  columnWidth={220}
  height={height}
  rowCount={Math.ceil(items.length / columnCount)}
  rowHeight={220}
  width={width}
>
  {({ columnIndex, rowIndex, style }) => {
    const index = rowIndex * columnCount + columnIndex;
    const item = items[index];
    return item ? (
      <div style={style}>
        <Sticky item={item} {...props} />
      </div>
    ) : null;
  }}
</FixedSizeGrid>
```

#### 3. ãƒ‡ãƒã‚¦ãƒ³ã‚¹ï¼ˆlodashï¼‰

**å•é¡Œ**: å…¥åŠ›æ™‚ã®é »ç¹ãªä¿å­˜ã§ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ä½ä¸‹

**è§£æ±ºç­–**:
```typescript
import { debounce } from 'lodash';

const debouncedSave = useMemo(
  () => debounce((data) => {
    store.set("items", data);
    store.save();
  }, 500),
  []
);

useEffect(() => {
  debouncedSave(items);
}, [items]);
```

#### 4. Web Workersï¼ˆå°†æ¥ï¼‰

**å•é¡Œ**: å¤§é‡ãƒ‡ãƒ¼ã‚¿ã®å‡¦ç†ã§UIãƒ–ãƒ­ãƒƒã‚¯

**è§£æ±ºç­–**:
```typescript
// src/workers/dataProcessor.worker.ts
self.addEventListener('message', (e) => {
  const { type, data } = e.data;

  if (type === 'PROCESS_ITEMS') {
    const processed = data.map(/* é‡ã„å‡¦ç† */);
    self.postMessage({ type: 'PROCESSED', data: processed });
  }
});

// App.tsx
const worker = new Worker(new URL('./workers/dataProcessor.worker.ts', import.meta.url));

worker.postMessage({ type: 'PROCESS_ITEMS', data: items });

worker.onmessage = (e) => {
  if (e.data.type === 'PROCESSED') {
    setProcessedItems(e.data.data);
  }
};
```

---

## ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆæ™‚ã®æ³¨æ„ç‚¹

### ãƒ‡ãƒ¼ã‚¿ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

**ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å¤‰æ›´æ™‚ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æˆ¦ç•¥**:

```typescript
// src/utils/migration.ts
interface Migration {
  version: number;
  migrate: (data: any) => any;
}

const migrations: Migration[] = [
  {
    version: 1,
    migrate: (data) => {
      // v0 â†’ v1: image ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’è¿½åŠ 
      return {
        ...data,
        items: data.items.map(item => ({
          ...item,
          image: item.image || null,
          imagePosition: item.imagePosition || 'top',
        })),
      };
    },
  },
  {
    version: 2,
    migrate: (data) => {
      // v1 â†’ v2: tags ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’è¿½åŠ 
      return {
        ...data,
        items: data.items.map(item => ({
          ...item,
          tags: item.tags || [],
        })),
      };
    },
  },
];

export async function migrateData(data: any, currentVersion: number, targetVersion: number) {
  let migratedData = data;

  for (let i = currentVersion; i < targetVersion; i++) {
    const migration = migrations.find(m => m.version === i + 1);
    if (migration) {
      migratedData = migration.migrate(migratedData);
    }
  }

  return migratedData;
}

// App.tsx - ãƒ‡ãƒ¼ã‚¿ãƒ­ãƒ¼ãƒ‰æ™‚
useEffect(() => {
  const loadData = async () => {
    try {
      const savedData = await store.get("versionedData");
      const currentVersion = savedData?.version || 0;
      const targetVersion = 2;  // æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³

      if (currentVersion < targetVersion) {
        const migratedData = await migrateData(savedData, currentVersion, targetVersion);
        await store.set("versionedData", { ...migratedData, version: targetVersion });
        await store.save();
        setItems(migratedData.items);
      } else {
        setItems(savedData.items);
      }
    } catch (error) {
      console.error("Failed to migrate data:", error);
    }
  };

  loadData();
}, []);
```

### ä¾å­˜é–¢ä¿‚ã®æ›´æ–°

**æ›´æ–°æ‰‹é †**:
```bash
# ä¾å­˜é–¢ä¿‚ã®ç¢ºèª
pnpm outdated

# ãƒã‚¤ãƒŠãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³æ›´æ–°
pnpm update

# ãƒ¡ã‚¸ãƒ£ãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³æ›´æ–°ï¼ˆæ…é‡ã«ï¼‰
pnpm add react@latest react-dom@latest

# TypeScriptæ›´æ–°å¾Œã€å‹ã‚¨ãƒ©ãƒ¼ã‚’ä¿®æ­£
pnpm exec tsc --noEmit
```

### Tauriæ›´æ–°

**æ›´æ–°æ‰‹é †**:
```bash
# Tauriãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèª
pnpm tauri info

# Tauri CLIæ›´æ–°
pnpm add -D @tauri-apps/cli@latest

# Tauri APIæ›´æ–°
pnpm add @tauri-apps/api@latest

# Rustã‚¯ãƒ¬ãƒ¼ãƒˆæ›´æ–°
cd src-tauri
cargo update
cd ..

# ãƒ“ãƒ«ãƒ‰ãƒ†ã‚¹ãƒˆ
pnpm tauri build
```

### ç ´å£Šçš„å¤‰æ›´ã¸ã®å¯¾å¿œ

**ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ**:
- [ ] package.jsonã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå·æ›´æ–°
- [ ] CHANGELOGã®ä½œæˆãƒ»æ›´æ–°
- [ ] ãƒ‡ãƒ¼ã‚¿ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰ã®è¿½åŠ 
- [ ] TypeScriptå‹å®šç¾©ã®æ›´æ–°
- [ ] ãƒ†ã‚¹ãƒˆã®æ›´æ–°ï¼ˆå°†æ¥ï¼‰
- [ ] README.mdã®æ›´æ–°
- [ ] ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®é€šçŸ¥ï¼ˆãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆï¼‰

---

## ãƒ†ã‚¹ãƒˆã®è¿½åŠ ï¼ˆå°†æ¥è¨ˆç”»ï¼‰

### ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

**ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ**: Vitest
```typescript
// src/utils/helpers.test.ts
import { describe, it, expect } from 'vitest';
import { isDark, isPop, cx } from './helpers';

describe('Theme helpers', () => {
  it('should detect dark theme', () => {
    expect(isDark('dark')).toBe(true);
    expect(isDark('pop')).toBe(false);
  });

  it('should detect pop theme', () => {
    expect(isPop('pop')).toBe(true);
    expect(isPop('classic')).toBe(false);
  });

  it('should combine classes correctly', () => {
    expect(cx('a', 'b', false && 'c', 'd')).toBe('a b d');
  });
});
```

**ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ†ã‚¹ãƒˆ**: React Testing Library
```typescript
// src/components/Sticky.test.tsx
import { render, screen, fireEvent } from '@testing-library/react';
import { describe, it, expect, vi } from 'vitest';
import { Sticky } from './Sticky';

describe('Sticky Component', () => {
  const mockItem = {
    id: '1',
    x: 100,
    y: 100,
    width: 200,
    height: 200,
    color: 'yellow',
    text: 'Test Note',
    variant: 'default',
  };

  it('should render sticky note with text', () => {
    render(
      <Sticky
        item={mockItem}
        selected={false}
        onUpdate={vi.fn()}
        onDelete={vi.fn()}
        theme="classic"
      />
    );

    expect(screen.getByText('Test Note')).toBeInTheDocument();
  });

  it('should call onDelete when delete button is clicked', () => {
    const onDelete = vi.fn();

    render(
      <Sticky
        item={mockItem}
        selected={true}
        onUpdate={vi.fn()}
        onDelete={onDelete}
        theme="classic"
      />
    );

    fireEvent.click(screen.getByRole('button', { name: /delete/i }));
    expect(onDelete).toHaveBeenCalled();
  });
});
```

**E2Eãƒ†ã‚¹ãƒˆ**: Playwrightï¼ˆTauriã‚¢ãƒ—ãƒªï¼‰
```typescript
// e2e/app.spec.ts
import { test, expect } from '@playwright/test';

test.describe('VisionBoard Diary E2E', () => {
  test('should add a new sticky note', async ({ page }) => {
    await page.goto('http://localhost:1420');

    await page.click('button:has-text("Add Sticky")');

    const sticky = page.locator('[data-testid="sticky-note"]').first();
    await expect(sticky).toBeVisible();
  });

  test('should save journal entry', async ({ page }) => {
    await page.goto('http://localhost:1420');

    await page.click('text=Journal');
    await page.fill('[contenteditable="true"]', 'Today was a good day');

    // è‡ªå‹•ä¿å­˜ã‚’å¾…ã¤
    await page.waitForTimeout(1000);

    // ãƒšãƒ¼ã‚¸ã‚’ãƒªãƒ­ãƒ¼ãƒ‰
    await page.reload();

    await expect(page.locator('[contenteditable="true"]')).toContainText('Today was a good day');
  });
});
```

### ãƒ†ã‚¹ãƒˆç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pnpm add -D vitest @testing-library/react @testing-library/jest-dom @testing-library/user-event

# Playwrightï¼ˆE2Eï¼‰
pnpm add -D @playwright/test
pnpm exec playwright install
```

**package.json**:
```json
{
  "scripts": {
    "test": "vitest",
    "test:ui": "vitest --ui",
    "test:e2e": "playwright test",
    "test:coverage": "vitest --coverage"
  }
}
```

---

## ãƒ‡ãƒãƒƒã‚°ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯

### é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«æ´»ç”¨

**React DevTools**:
- ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆéšå±¤ã®ç¢ºèª
- Props/State ã®æ¤œæŸ»
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚°

**Chrome DevTools**:
- ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¿ãƒ–: Tauri APIã‚³ãƒ¼ãƒ«ã®ç›£è¦–
- Performanceã‚¿ãƒ–: ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æ
- Memoryã‚¿ãƒ–: ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯æ¤œå‡º

### Tauriãƒ‡ãƒãƒƒã‚°

**Rustãƒ­ã‚°å‡ºåŠ›**:
```rust
// src-tauri/src/lib.rs
#[tauri::command]
fn greet(name: &str) -> String {
    println!("Greet command called with: {}", name);  // ãƒ­ã‚°å‡ºåŠ›
    format!("Hello, {}!", name)
}
```

**ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ­ã‚°**:
```typescript
// App.tsx
useEffect(() => {
  console.log('Items updated:', items);
}, [items]);
```

**ã‚¹ãƒˆã‚¢ãƒ‡ãƒ¼ã‚¿ç¢ºèª**:
```typescript
// ãƒ‡ãƒ¼ã‚¿ç¢ºèªç”¨ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
const debugStore = async () => {
  const data = await store.get("items");
  console.log('Stored items:', data);
};
```

---

## ãƒªãƒªãƒ¼ã‚¹ãƒ—ãƒ­ã‚»ã‚¹

### ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†

**ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯ãƒãƒ¼ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°**: `MAJOR.MINOR.PATCH`

- **MAJOR**: ç ´å£Šçš„å¤‰æ›´
- **MINOR**: æ–°æ©Ÿèƒ½è¿½åŠ ï¼ˆå¾Œæ–¹äº’æ›ï¼‰
- **PATCH**: ãƒã‚°ä¿®æ­£

### ãƒªãƒªãƒ¼ã‚¹æ‰‹é †

1. **ãƒãƒ¼ã‚¸ãƒ§ãƒ³æ›´æ–°**:
```bash
# package.json
"version": "0.2.0"

# src-tauri/Cargo.toml
version = "0.2.0"

# src-tauri/tauri.conf.json
"version": "0.2.0"
```

2. **CHANGELOGä½œæˆ**:
```markdown
# CHANGELOG.md

## [0.2.0] - 2025-01-XX

### Added
- ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½
- æ¤œç´¢æ©Ÿèƒ½

### Fixed
- æ—¥è¨˜ä¿å­˜ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°å•é¡Œ

### Changed
- ãƒ†ãƒ¼ãƒã‚·ã‚¹ãƒ†ãƒ ã®æ”¹å–„
```

3. **ãƒ“ãƒ«ãƒ‰**:
```bash
pnpm tauri build
```

4. **Git ã‚¿ã‚°**:
```bash
git add .
git commit -m "Release v0.2.0"
git tag v0.2.0
git push origin main --tags
```

5. **GitHub Release**:
- GitHubã§ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆä½œæˆ
- ãƒ“ãƒ«ãƒ‰æˆæœç‰©ï¼ˆMSI/NSISï¼‰ã‚’æ·»ä»˜

---

## ã¾ã¨ã‚

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€VisionBoard Diaryã®ç¶™ç¶šçš„ãªé–‹ç™ºã¨ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚’æ”¯æ´ã™ã‚‹ãŸã‚ã«ä½œæˆã•ã‚Œã¾ã—ãŸã€‚

**é‡è¦ãªãƒã‚¤ãƒ³ãƒˆ**:
- ãƒ‡ãƒ¼ã‚¿ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ…é‡ã«è¨ˆç”»ã™ã‚‹
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ã¯æ¸¬å®šå¾Œã«å®Ÿæ–½
- ãƒ†ã‚¹ãƒˆã‚’æ®µéšçš„ã«è¿½åŠ 
- ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯ãƒãƒ¼ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ã‚’éµå®ˆ

å°†æ¥ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã§ã¯ã€ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚‚æ›´æ–°ã—ã¦ãã ã•ã„ã€‚

---

ğŸ¤– Generated with [Claude Code](https://claude.com/claude-code)
